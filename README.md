# rofdump


A command line utility for displaying recorded voltage and current values from a ROF binary file generated by **Rigol 800** series lab power supplies.  

By default, recorded values are printed to the console. The columns are organized into channel voltage/current value pairs for each recorded data point.

Use the handy `-c` option to output to CSV. Use this option in conjunction with GNUPlot to generate pretty graphs. [Examples below](#using-with-gnuplot).

##### Example output
```
$ ./rofdump data.ROF
Data points: 318
Period: 1 second(s)
Number of channels: 3
	
1:	11.992100(V), 0.015700(A)	4.998700(V), 0.736800(A)	5.000800(V), 0.156000(A)	
2:	11.992600(V), 1.845900(A)	4.998800(V), 0.858200(A)	5.001000(V), 0.465700(A)	
3:	11.992800(V), 2.334900(A)	4.999000(V), 0.746800(A)	5.001000(V), 0.466200(A)	
4:	11.993200(V), 2.884300(A)	4.999000(V), 0.752700(A)	5.001000(V), 0.498700(A)	
5:	11.993300(V), 3.067400(A)	4.998900(V), 0.754600(A)	5.001000(V), 0.516600(A)	
...
```


##### Example CSV output
```
$ ./rofdump -c data.ROF 
Seconds,CH1 Voltage,CH1 Current,CH2 Voltage,CH2 Current,CH3 Voltage,CH3 Current
1,11.992100,0.015700,4.998700,0.736800,5.000800,0.156000
2,11.992600,1.845900,4.998800,0.858200,5.001000,0.465700
3,11.992800,2.334900,4.999000,0.746800,5.001000,0.466200
4,11.993200,2.884300,4.999000,0.752700,5.001000,0.498700
5,11.993300,3.067400,4.998900,0.754600,5.001000,0.516600
...
```
## Prerequisites
Compiles on any POSIX system with `make`.

## Compiling
Just run make

```
$ make
```
## Using with GNUPlot
Use the `-c` option to output a csv file, which you can then easily use with GNUPlot.

In the examples below, the ROF file is from a DP832 (3 channels).

#### Plot all data for CH1, CH2, and CH3
![ch1-ch2-ch3-voltage-current.svg](https://s3.amazonaws.com/static.markruiz.com/rofdump/ch1-ch2-ch3-voltage-current.svg)

```
$ ./rofdump -c data.ROF > data.csv && \ 
gnuplot -e "set terminal svg; \
set output 'graph.svg'; \
set title 'CH1, CH2, CH3 Voltage and Current'; \
set xlabel 'Time (s)'; \
set offset 0, 0, 6, 0; \
set datafile separator comma; \
plot for [i=2:7] 'data.csv' using 0:i with lines title columnhead"
```
---
#### Plot current for CH1, CH2, and CH3
![ch1-ch2-ch3-current.svg](https://s3.amazonaws.com/static.markruiz.com/rofdump/ch1-ch2-ch3-current.svg)

```
$ ./rofdump -c data.ROF > data.csv && \ 
gnuplot -e "set terminal svg; \
set output 'graph.svg'; \
set title 'CH1, CH2, CH3 Current'; \
set xlabel 'Time (s)'; \
set ylabel 'Current (A)'; \
set datafile separator comma; \
plot for [i=3:7:2] 'data.csv' using 0:i with lines title columnhead"
```




